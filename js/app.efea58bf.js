(function(e){function t(t){for(var r,o,n=t[0],l=t[1],c=t[2],d=0,h=[];d<n.length;d++)o=n[d],i[o]&&h.push(i[o][0]),i[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(h.length)h.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},i={app:0},s=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/ECEN460.github.io/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var r=a("64a9"),i=a.n(r);i.a},1:function(e,t){},2:function(e,t){},3:function(e,t){},"32e0":function(e,t,a){"use strict";var r=a("9f0a"),i=a.n(r);i.a},4:function(e,t){},4678:function(e,t,a){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb718","./de-ch.js":"bb718","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118b","./fy.js":"7118b","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=s(e);return a(t)}function s(e){var t=r[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}i.keys=function(){return Object.keys(r)},i.resolve=s,e.exports=i,i.id="4678"},5:function(e,t){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("a-layout",{attrs:{id:"components-layout-demo-top"}},[r("a-layout-header",{staticClass:"header"},[r("div",{staticClass:"logo"},[r("img",{attrs:{src:a("9cce")}})]),r("a-menu",{style:{lineHeight:"64px"},attrs:{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"]}},[r("a-menu-item",{key:"1",on:{click:function(t){e.currentPage="Client"}}},[e._v("Client")]),r("a-menu-item",{key:"2",attrs:{lockMarket:e.lock,disabled:e.marketDisable},on:{click:function(t){e.currentPage="Market"}}},[e._v("Market")])],1)],1),r("a-layout-content",{staticStyle:{padding:"0 50px"}},[r("div",{style:{background:"#fff",padding:"24px",minHeight:"280px"}},[r(e.page,{tag:"component",on:{lockMarket:e.lock}})],1)]),r("a-layout-footer",{staticStyle:{"text-align":"center"}},[e._v("TAMU ECEN460 Â©2019 Created by Wei Trinh and Zeyu Mao"),r("br"),e._v("If you have any questions regarding this website, please contact weit1@tamu.edu or zeyumao2@tamu.edu")])],1)],1)},s=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[e._v(e._s(e.msg))]),e._m(0),a("h3",[e._v("Installed CLI Plugins")]),e._m(1),a("h3",[e._v("Essential Links")]),e._m(2),a("h3",[e._v("Ecosystem")]),e._m(3)])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("\n    For a guide and recipes on how to configure / customize this project,"),a("br"),e._v("\n    check out the\n    "),a("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-cli documentation")]),e._v(".\n  ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[e._v("babel")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[e._v("eslint")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Core Docs")])]),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Forum")])]),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Community Chat")])]),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[e._v("Twitter")])]),a("li",[a("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("News")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-router")])]),a("li",[a("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vuex")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[e._v("vue-devtools")])]),a("li",[a("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-loader")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[e._v("awesome-vue")])])])}],l={name:"HelloWorld",props:{msg:String}},c=l,u=(a("32e0"),a("2877")),d=Object(u["a"])(c,o,n,!1,null,"0b11c2c6",null),h=d.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-row",{attrs:{gutter:15,justify:"center",align:"top"}},[a("a-col",{attrs:{span:8}},[a("a-divider",[e._v("User Name")]),a("a-input",{attrs:{disabled:e.userDisable,placeholder:"User Name"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("a-divider",[e._v("Market ID")]),a("a-input",{attrs:{disabled:e.idDisable,placeholder:"Market ID"},model:{value:e.marketID,callback:function(t){e.marketID=t},expression:"marketID"}})],1),a("a-col",{attrs:{span:8}},[a("a-list",{attrs:{grid:{column:1},dataSource:e.dataServ},scopedSlots:e._u([{key:"renderItem",fn:function(t){return a("a-list-item",{},[a("a-card",{attrs:{title:t.title}},[e._v(e._s(t.value))])],1)}}])})],1),a("a-col",{attrs:{span:8}},[a("a-divider",[e._v("Connection Options")]),a("a-row",{staticClass:"button_row"},[a("a-button",{attrs:{block:"",type:"primary",disabled:e.serverConnected},on:{click:e.connectServer}},[e._v("Connect to Server")])],1),a("a-row",{staticClass:"button_row"},[a("a-button",{attrs:{type:"primary",disabled:e.serverDisconnected,block:""},on:{click:e.disconnectServer}},[e._v("Disconnect from Server")])],1)],1)],1),a("a-row",{attrs:{gutter:10,justify:"center"}},[a("a-col",{attrs:{span:16}},[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{span:14}},[a("a-divider",[e._v("Scenario Information")]),a("a-list",{attrs:{grid:{gutter:5,column:3},dataSource:e.dataSim},scopedSlots:e._u([{key:"renderItem",fn:function(t){return a("a-list-item",{},[a("a-card",{attrs:{title:t.title}},[e._v(e._s(t.value))])],1)}}])})],1),a("a-col",{attrs:{span:10}},[a("a-divider",[e._v("Current Period")]),a("a-list",{attrs:{grid:{gutter:5,column:2},dataSource:e.dataCurr},scopedSlots:e._u([{key:"renderItem",fn:function(t){return a("a-list-item",{},[a("a-card",{attrs:{title:t.title}},[e._v(e._s(t.value))])],1)}}])})],1)],1),a("a-row",[a("a-divider",[e._v("Offers for Current Period")]),a("a-table",{attrs:{columns:e.columnsOffer,dataSource:e.dataOffer,pagination:!1,bordered:""},scopedSlots:e._u([{key:"offer",fn:function(t,r,i){return[a("a-input-number",{key:i,attrs:{step:.01,min:0},on:{change:function(t){return e.handleChange(t,r.key)}}})]}}])})],1),a("a-row",[a("a-col",{attrs:{span:24}},[a("a-row",{staticClass:"button_row"},[a("a-button",{attrs:{disabled:e.offerDisable,block:"",type:"primary"},on:{click:e.submitOffer}},[e._v("Submit Offers")])],1)],1)],1),a("div",{attrs:{id:"chart"}},[a("apexchart",{attrs:{type:"line",height:"350",options:e.chartOptions,series:e.offerSeries}})],1),a("div",{attrs:{id:"chart"}},[a("apexchart",{attrs:{type:"bar",height:"350",options:e.profitOptions,series:e.profitSeries}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-divider",[e._v("Previous Period Results")]),a("Box",{staticClass:"item",attrs:{pose:e.isVisible?"visible":"hidden"}},[a("a-list",{attrs:{grid:{gutter:5,xs:2},dataSource:e.dataPrevPeriod},scopedSlots:e._u([{key:"renderItem",fn:function(t){return a("a-list-item",{},[a("a-card",{attrs:{title:t.title}},[e._v(e._s(t.value))])],1)}}])})],1),a("a-divider",[e._v("Last Period Generator Distribution")]),a("a-row",[a("a-col",{attrs:{span:12}},[a("div",{attrs:{id:"chart"}},[a("apexchart",{attrs:{type:"pie",height:"350",width:"350",options:e.generatorOptions,series:e.generatorSeries}})],1)]),a("a-col",{attrs:{span:12}},[a("div",{attrs:{id:"chart"}},[a("apexchart",{attrs:{height:"350",width:"350",type:"radialBar",options:e.capacityOptions,series:e.capacitySeries}})],1)])],1)],1)],1)],1)},p=[],m=a("75fc"),b=a("db0c"),v=a.n(b),g=a("a4bb"),y=a.n(g),P=(a("6b54"),a("e814")),k=a.n(P),j=a("f499"),D=a.n(j),_=a("2685"),x=a.n(_),w=a("4487"),S=a.n(w),C=a("95d1"),M=[{title:"Generator Number",dataIndex:"number",width:100,align:"center"},{title:"Capacity (MW)",dataIndex:"capacity",width:150,align:"center"},{title:"Marginal Cost ($/MWh)",dataIndex:"lambda",width:150,align:"center"},{title:"Offer ($/MWh)",dataIndex:"offer",width:100,align:"center",scopedSlots:{customRender:"offer"}}],I=[{key:"1",number:"1",capacity:"50.0",lambda:"20.00",offer:null},{key:"2",number:"2",capacity:"20.0",lambda:"30.00",offer:null},{key:"3",number:"3",capacity:"10.0",lambda:"40.00",offer:null},{key:"4",number:"4",capacity:"10.0",lambda:"50.00",offer:null},{key:"5",number:"5",capacity:"10.0",lambda:"65.00",offer:null}],O=[{title:"Total Profit ($)",value:0},{title:"Period Number",value:0},{title:"Period Load (MW)",value:0},{title:"Clearing Price ($/MWh)",value:0},{title:"Your Generation (MW)",value:0},{title:"Your Profit ($)",value:0}],N=[{title:"Scenario Type",value:"N/A"},{title:"# of Players",value:0},{title:"Elapsed Periods",value:0}],A=[{title:"Period Number",value:0},{title:"Period Load (MW)",value:0}],L={props:{},data:function(){return{marketID:null,username:null,serverConnected:!1,serverDisconnected:!0,offerDisable:!0,idDisable:!1,userDisable:!1,dataOffer:I,columnsOffer:M,totalBids:[],dataPrevPeriod:O,dataSim:N,dataCurr:A,dataServ:[{title:"Server Status",value:"Disconnected"}],genColors:["#77B6EA","#545454"],genWidth:[],genDash:[],offerSeries:[],offerOpacity:[],offerYaxis:[{show:!0,seriesName:"Generator 1",title:{text:"Prices/Bids ($/MWh)"}},{seriesName:"Total Load",opposite:!0,title:{text:"Load (MW)"}}],periodProfitList:[],totalProfitList:[],periodCategories:[],profitMin:0,profitMax:100,currentCapacity:0,totalCapacity:0,capacitySeries:[0],generatorSeries:[100],generatorLabels:["Generator 1"],uniqueID:S.a.generate(6),ably:Object,channel:Object,isVisible:!0,firstConnection:!0,connectAttempt:0}},methods:{initialize:function(){var e=this;if(this.connectAttempt+=1,this.firstConnection)this.firstConnection=!1,this.ably=window.Ably.Realtime({key:"ryKsCg.m6cLsw:oTvefd18MY8drI0z",clientId:this.username}),this.ably.connection.on("connected",function(){console.log("Connnected to Ably in realtime.")}),this.channel=this.ably.channels.get("market_"+this.marketID),this.channel.on("attached",function(){console.log("Channel attached"),e.channel.presence.enter(),e.channel.subscribe(e.username,function(t){e.onRegistered(t)});var t=e.marketID+"/registration";e.channel.publish(t,D()(e.connectData))}),this.channel.attach();else{var t=this.marketID+"/registration";this.channel.publish(t,D()(this.connectData))}},onRegistered:function(e){var t,r,i,s,o,n,l,c=this,u=JSON.parse(e.data);if("200"===u.status){var d=this.marketID+"/result";this.channel.subscribe(d,function(e){c.onReceiveResult(e)}),"Disconnected"==this.dataServ[0].value&&(this.dataServ[0].value="Connected"),x.a.success({title:"Connection Status",message:"You have successfully connected to the server, with Market ID: "+this.marketID,position:"topCenter"}),t=[],r=0;var h=this.offerYaxis.pop();for(var f in this.dataOffer)r+=k()(I[f].capacity,10),i=a("fd9b"),s=i(),t.push(s),o=k()(f,10),o+=1,n=o.toString(),l={data:[],name:"Generator "+n},this.offerYaxis.push({seriesName:"Generator 1",show:!1}),this.totalBids.push(l),this.genWidth.push(2),this.genDash.push(0),this.offerOpacity.push(1);this.totalCapacity=r,this.offerYaxis.push(h),this.totalBids.push({data:[],name:"Clearing Price"}),this.genWidth.push(5),this.genDash.push(5),this.offerOpacity.push(1),t.push(i()),this.totalBids.push({data:[],type:"column",name:"Total Load"}),this.genWidth.push(4),this.genDash.push(0),this.offerOpacity.push(.5),t.push(i()),this.genColors=t,this.serverConnected=!0,this.serverDisconnected=!1,this.idDisable=!0,this.userDisable=!0,this.$emit("lockMarket",!0)}else if("201"===u.status){var p=this.marketID+"/result";this.channel.subscribe(p,function(e){c.onReceiveResult(e)}),"Disconnected"==this.dataServ[0].value&&(this.dataServ[0].value="Connected"),x.a.success({title:"Connection Status",message:"You have successfully reconnected to the server, with Market ID: "+this.marketID,position:"topCenter"}),t=[],r=0;var m=this.offerYaxis.pop();for(var b in this.dataOffer)r+=k()(I[b].capacity,10),i=a("fd9b"),s=i(),t.push(s),o=k()(b,10),o+=1,n=o.toString(),l={data:[],name:"Generator "+n},this.offerYaxis.push({seriesName:"Generator 1",show:!1}),this.totalBids.push(l),this.genWidth.push(2),this.genDash.push(0),this.offerOpacity.push(1);this.totalCapacity=r,this.offerYaxis.push(m),this.totalBids.push({data:[],name:"Clearing Price"}),this.genWidth.push(5),this.genDash.push(5),this.totalBids.push({data:[],type:"column",name:"Total Load"}),this.genWidth.push(4),this.genDash.push(0),t.push(i()),this.genColors=t,this.serverConnected=!0,this.serverDisconnected=!1,this.idDisable=!0,this.userDisable=!0,this.$emit("lockMarket",!0),console.log("Registration successful.");var v=u.payload;console.log(v),v!={}&&(this.offerDisable=!1,this.isVisible=!this.isVisible,setTimeout(function(){c.isVisible=!c.isVisible},800),this.processResult(v))}else"202"===u.status&&x.a.warning({title:"Submit NOW",message:u.payload,position:"center",closeOnEscape:!0,pauseOnHover:!1})},onError:function(e){console.log("onError: "+e)},onReceiveResult:function(e){console.log(" "),console.log("Message received from market.");var t=JSON.parse(e.data);this.processResult(t)},processResult:function(e){var t=this;if("lao"==e["scenarioType"]?N[0].value="Last Accepted Offer":"pao"==e["scenarioType"]&&(N[0].value="Pay As Offered"),N[1].value=e["scenarioSetup"][0].value,N[2].value=e["lastPeriod"][0],console.log("Period Number: ",A[0].value),console.log(e),e["currentPeriod"][0]-1!=e["scenarioSetup"][1].value){if(A[0].value=e["currentPeriod"][0],A[1].value=e["currentPeriod"][1],O[0].value=e["lastPeriodResult"][this.username]["totalProfit"].toFixed(2),A[0].value>1){this.totalProfitList.push(e["lastPeriodResult"][this.username]["totalProfit"]),this.totalBids[this.totalBids.length-2].data.push(e["lastPeriod"][2]),this.totalBids[this.totalBids.length-1].data.push(e["lastPeriod"][1]),this.periodCategories.push(e["lastPeriod"][0]),this.periodProfitList.push(O[5].value=e["lastPeriodResult"][this.username]["profit"]);var a=e["lastPeriodResult"][this.username]["generationDetail"],r=[];for(var i in y()(a)){var s=k()(i);s+=1,r.push("Generator "+s.toString())}this.generatorLabels=r,this.generatorSeries=v()(a);var o=0;for(var n in v()(a))o+=v()(a)[n];this.currentCapacity=o,this.capacitySeries=[100*(this.currentCapacity/this.totalCapacity).toFixed(2)];var l=Math.max.apply(Math,Object(m["a"])(this.totalProfitList)),c=Math.min.apply(Math,Object(m["a"])(this.totalProfitList)),u=Math.max.apply(Math,Object(m["a"])(this.periodProfitList)),d=Math.min.apply(Math,Object(m["a"])(this.periodProfitList)),h=Math.max(l,u),f=Math.min(c,d);h<=0?(this.profitMax=0,this.profitMin=Math.min(c,l)):h>0&&(this.profitMax=h,f>0?this.profitMin=0:f<=0&&(this.profitMin=f))}O[1].value=e["lastPeriod"][0],O[2].value=e["lastPeriod"][1],O[3].value=e["lastPeriod"][2].toFixed(2),O[4].value=e["lastPeriodResult"][this.username]["generation"],O[5].value=e["lastPeriodResult"][this.username]["profit"].toFixed(2),x.a.success({title:"Period Results",message:"Period "+N[2].value+" is over, you've made: $"+O[5].value.toString(),position:"topCenter"}),this.offerDisable=!1,this.isVisible=!this.isVisible,setTimeout(function(){t.isVisible=!t.isVisible},800)}else if(e["currentPeriod"][0]-1==e["scenarioSetup"][1].value){if(O[0].value=e["lastPeriodResult"][this.username]["totalProfit"].toFixed(2),A[0].value>1){for(i in this.totalProfitList.push(e["lastPeriodResult"][this.username]["totalProfit"]),this.totalBids[this.totalBids.length-2].data.push(e["lastPeriod"][2].toFixed(2)),this.totalBids[this.totalBids.length-1].data.push(e["lastPeriod"][1]),this.periodCategories.push(e["lastPeriod"][0]),this.periodProfitList.push(O[5].value=e["lastPeriodResult"][this.username]["profit"]),a=e["lastPeriodResult"][this.username]["generationDetail"],r=[],y()(a))s=k()(i),s+=1,r.push("Generator "+s.toString());for(n in this.generatorLabels=r,this.generatorSeries=v()(a),o=0,v()(a))o+=v()(a)[n];this.currentCapacity=o,this.capacitySeries=[this.currentCapacity/this.totalCapacity*100],l=Math.max.apply(Math,Object(m["a"])(this.totalProfitList)),c=Math.min.apply(Math,Object(m["a"])(this.totalProfitList)),u=Math.max.apply(Math,Object(m["a"])(this.periodProfitList)),d=Math.min.apply(Math,Object(m["a"])(this.periodProfitList)),h=Math.max(l,u),f=Math.min(c,d),h<=0?(this.profitMax=0,this.profitMin=Math.min(c,l)):h>0&&(this.profitMax=h,f>0?this.profitMin=0:f<=0&&(this.profitMin=f))}O[1].value=e["lastPeriod"][0],O[2].value=e["lastPeriod"][1],O[3].value=e["lastPeriod"][2].toFixed(2),O[4].value=e["lastPeriodResult"][this.username]["generation"],O[5].value=e["lastPeriodResult"][this.username]["profit"].toFixed(2),x.a.success({title:"Period Results",message:"The market is over, you've made in total: $"+O[0].value.toString(),position:"topCenter"}),this.offerDisable=!0,this.serverConnected=!1,this.serverDisconnected=!0,this.idDisable=!1,this.userDisable=!1,this.totalBids=[]}},serverChooser:function(e){this.marketID=e},submitOffer:function(){var e=this;this.$confirm({title:"Do you want to submit these offers?",content:"Please make sure these are the offers you would like to submit for this period.",onOk:function(){e.confirmSubmission(),e.offerDisable=!0},onCancel:function(){}})},confirmSubmission:function(){var e=[];for(var t in this.offerYaxis[0].max=Math.max.apply(Math,Object(m["a"])(this.dataOffer.map(function(e){return e.offer})).concat([0])),this.dataOffer){var a=this.dataOffer[t];this.totalBids[t].data.push(D()(a["offer"])),e.push(D()(a["offer"]))}this.offerSeries=this.totalBids,console.log(this.offerSeries);var r={marketID:this.marketID,name:this.username,uniqueID:this.uniqueID,bid:e},i=this.marketID+"/bid";this.channel.publish(i,D()(r))},connectServer:function(){this.initialize()},disconnectServer:function(){this.connectAttempt=0;var e={marketID:this.marketID,name:this.username,uniqueID:this.username,action:"disconnect"},t=this.marketID+"/registration";this.channel.publish(t,D()(e));var a=this.marketID+"/result";this.channel.unsubscribe(a),console.log('Disconnected from "'.concat(a,'"')),"Connected"==this.dataServ[0].value&&(this.dataServ[0].value="Disconnected"),this.serverConnected=!1,this.serverDisconnected=!0,this.idDisable=!1,this.userDisable=!1,this.offerDisable=!0,this.$emit("lockMarket",!1),this.totalBids=[],this.totalProfitList=[],this.periodProfitList=[],x.a.success({title:"Connection Status",message:"You have successfully disconnected from the server, with Market ID: "+this.marketID,position:"topCenter"}),console.log(e)},handleChange:function(e,t){this.dataOffer.filter(function(e){return t===e.key})[0]["offer"]=e}},computed:{connectData:function(){return{marketID:this.marketID,name:this.username,uniqueID:this.username,action:"connect"}},profitSeries:function(){return[{name:"Period Profit",data:this.periodProfitList},{name:"Total Profit",data:this.totalProfitList}]},generatorOptions:function(){return{labels:this.generatorLabels,title:{text:"Total Generation: "+this.dataPrevPeriod[4].value+" MW"}}},chartOptions:function(){return{chart:{shadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:1},toolbar:{show:!1}},colors:this.genColors,dataLabels:{enabled:!1},stroke:{width:this.genWidth,curve:"straight",dashArray:this.genDash},title:{text:"Clearing Price and Your Offers from Past Periods",align:"left"},grid:{borderColor:"#e7e7e7",row:{colors:["#f3f3f3","transparent"],opacity:.5}},markers:{size:6},fill:{opacity:this.offerOpacity},xaxis:{categories:[],title:{text:"Periods"}},yaxis:this.offerYaxis,legend:{position:"bottom",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5}}},profitOptions:function(){return{bar:{columnWidth:"100%"},dataLabels:{enabled:!1},title:{text:"Total Profit and Previous Period Profits",align:"left"},xaxis:{categories:this.periodCategories,title:{text:"Periods"},labels:{rotate:-90}},yaxis:{title:{text:"Profit ($)"},min:this.profitMin,max:this.profitMax}}},capacityOptions:function(){return{plotOptions:{radialBar:{hollow:{}}},labels:["Capacity Used"]}}},watch:{connectAttempt:function(e){3==e?x.a.warning({title:"Connection Status",message:"Are you sure "+this.marketID+" is the correct Market ID?",position:"topCenter"}):5==e?x.a.warning({title:"Connection Status",message:"Please check whether Market "+this.marketID+" is online.",position:"topCenter"}):e>7&&x.a.error({title:"Connection Failed",message:"Please refresh the page or contact the developer for help.",position:"topCenter"})}},components:{apexchart:window.VueApexCharts,Box:C["a"].div({visible:{opacity:1,y:0},hidden:{opacity:0,y:20}})}},R=L,z=(a("abef"),Object(u["a"])(R,f,p,!1,null,"eb5d5264",null)),B=z.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:4}},[a("a-divider",[e._v("Market ID")]),a("a-row",{attrs:{gutter:8}},[a("a-col",{attrs:{span:12}},[a("a-input",{attrs:{addonBefore:e.id_prefix,disabled:e.serverStarted},model:{value:e.marketID,callback:function(t){e.marketID=t},expression:"marketID"}})],1),a("a-col",{attrs:{span:12}},[a("a-button",{attrs:{block:""},on:{click:e.copyID}},[e._v(e._s(e.channel_prefix))])],1)],1),a("a-divider",[e._v("Scenario Type")]),a("a-row",[a("a-select",{staticStyle:{width:"100%"},attrs:{defaultValue:"lao",value:e.typeSelected,disabled:e.marketStarted},on:{change:e.changeType}},[a("a-select-option",{attrs:{value:"lao"}},[e._v("Last Accepted Offer")]),a("a-select-option",{attrs:{value:"pao"}},[e._v("Pay as Offerred")])],1)],1),a("a-divider",[e._v("Actions")]),a("a-row",{staticClass:"button_row"},[a("a-col",{attrs:{span:8}},[a("a-checkbox",{on:{change:e.onAuto}},[e._v("Auto")])],1),a("a-col",{attrs:{span:16}},[a("a-button",{staticStyle:{padding:""},attrs:{type:"primary",block:"",disabled:e.serverStarted},on:{click:e.startServer}},[e._v("Start Server")])],1)],1),a("a-row",{staticClass:"button_row"},[a("a-button",{staticStyle:{padding:""},attrs:{type:"primary",block:"",disabled:e.marketClosed||!e.serverStarted||e.notEnoughPlayer},on:{click:e.startPeriod}},[e._v(e._s(e.periodBtnLabel))])],1),a("a-row",{staticClass:"button_row"},[a("a-button",{attrs:{block:""},on:{click:e.save}},[e._v("Save Data")])],1),a("a-row",{staticClass:"button_row"},[a("a-button",{attrs:{block:"",type:"danger"},on:{click:e.reset}},[e._v("Reset")])],1),a("a-row",{staticClass:"button_row"},[a("label",{staticClass:"text-reader"},[e._v("\n          Load Profile\n          "),a("input",{attrs:{type:"file",disabled:e.marketStarted},on:{change:e.loadTextFromFile}})])])],1),a("a-col",{attrs:{span:20}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:12}},[a("a-divider",[e._v("Scenario Setup")]),a("a-list",{attrs:{grid:{gutter:16,column:3},dataSource:e.scenarioSetup},scopedSlots:e._u([{key:"renderItem",fn:function(t){return a("a-list-item",{},[a("a-card",{attrs:{title:t.title}},["Number Connected"==t.title?a("p",[e._v("\n                  "+e._s(t.value)+"\n                ")]):"Number of Players"==t.title?a("a-input-number",{attrs:{min:1,disabled:e.marketStarted},model:{value:e.allowedPlayerNumber,callback:function(t){e.allowedPlayerNumber=t},expression:"allowedPlayerNumber"}}):"Number of Periods"==t.title?a("a-input-number",{attrs:{min:1,disabled:e.marketStarted},model:{value:e.totalPeriod,callback:function(t){e.totalPeriod=t},expression:"totalPeriod"}}):e._e()],1)],1)}}])})],1),a("a-col",{attrs:{span:12}},[a("a-divider",[e._v("Current Period")]),a("a-list",{attrs:{grid:{gutter:16,column:3},dataSource:e.lastPeriod},scopedSlots:e._u([{key:"renderItem",fn:function(t){return a("a-list-item",{},[a("a-card",{attrs:{title:t.title}},[e._v(e._s(t.value))])],1)}}])})],1)],1),a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:12}},[a("a-divider",[e._v("Next Period")]),a("a-list",{attrs:{grid:{gutter:16,column:3},dataSource:e.currentPeriod},scopedSlots:e._u([{key:"renderItem",fn:function(t){return a("a-list-item",{},[a("a-card",{attrs:{title:t.title}},[e._v(e._s(t.value))])],1)}}])})],1),a("a-col",{attrs:{span:12}},[a("div",{attrs:{id:"chart"}},[a("apexchart",{ref:"spark",attrs:{type:"line",height:"160",options:e.chartOptions,series:e.series}})],1)])],1)],1)],1),a("a-row",{attrs:{gutter:16}},[a("a-divider",[e._v("Player Results")]),a("a-col",{attrs:{span:12}},[a("a-table",{attrs:{columns:e.playerTable,dataSource:e.playerData,rowKey:"name"},scopedSlots:e._u([{key:"action",fn:function(t,r){return[a("a",{on:{click:function(){return e.onDelete(r.name)}}},[e._v("Delete")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(){return e.onHurry(r.name)}}},[e._v("Hurry-up")])]}}])})],1),a("a-col",{attrs:{span:12}},[a("vue-plotly",{attrs:{data:e.plotlyData,layout:e.plotlyLayout,options:e.plotlyOptions,autoResize:!0}})],1)],1),a("a-row",[a("a-divider",[e._v("Period Results")]),a("a-table",{attrs:{columns:e.periodTable,dataSource:e.periodData,rowKey:"number"},scopedSlots:e._u([{key:"name",fn:function(t){return[e._v(e._s(t.first)+" "+e._s(t.last))]}}])})],1)],1)},Y=[],W=(a("c5f6"),a("55dd"),a("7f7f"),a("20d6"),a("6c7b"),a("5118")),H=a("43e0"),F=a.n(H),E={props:{},data:function(){return{ably:new window.Ably.Realtime("ryKsCg.qhzFyg:jjSC-ODw2HH7UKnq"),channel:Object,serverStarted:!1,marketStarted:!1,marketClosed:!1,lastPeriodNumber:0,currentPeriodNumber:1,lap:null,periodProfit:null,periodLoadList:[0,300,400,450,475,425,375,300,250,255,300,350,375,400,425,475],lastPeriodPrice:0,allowedPlayerNumber:6,onlinePlayerNumber:0,totalPeriod:15,formLayout:"horizontal",marketID:1,typeSelected:"lao",scenarioType:[{text:"Last Accepted Offer"},{text:"Pay as Offerred"}],playerTable:[{title:"Name",dataIndex:"name",sorter:!0},{title:"In-market",dataIndex:"inmarket",sorter:!0},{title:"Total Profit($)",dataIndex:"total_profit",sorter:function(e,t){return e.total_profit-t.total_profit}},{title:"Offers In",dataIndex:"offers",sorter:function(e,t){return e.offers.length-t.offers.length}},{title:"Action",dataIndex:"",scopedSlots:{customRender:"action"}}],playerData:[],periodTable:[{title:"Number",dataIndex:"number",sorter:!0},{title:"Load (MW)",dataIndex:"load",sorter:!0},{title:"Price ($/MWh)",dataIndex:"price",sorter:!0},{title:"Total Profit ($)",dataIndex:"profit",sorter:!0}],periodData:[],mqttClient:null,onlinePlayers:{},periodResult:{},id_prefix:S.a.generate({length:4,readable:!0,capitalization:"uppercase"}),automatic:!1,traffic_data:Array(11).fill(0),lastCount:0,currentCount:0,chartOptions:{chart:{sparkline:{enabled:!0},animations:{enabled:!0,easing:"linear",dynamicAnimation:{speed:2e3}},toolbar:{show:!1},zoom:{enabled:!1}},stroke:{curve:"smooth",width:1},tooltip:{enabled:!1},xaxis:{range:10},yaxis:{min:0,max:10}},chartBottom:0,plotlyData:[],plotlyOptions:{displayModeBar:!1},last_message:{},registration_buffer:[],offer_buffer:[]}},methods:{initialize:function(){var e=this;this.ably.connection.on("connected",console.log("Connnected to Ably in realtime")),this.channel=this.ably.channels.get("market_"+this.channel_prefix),this.channel.presence.subscribe("enter",function(e){console.log("haha"),console.log("Member "+e.clientId+" entered ("+e.connectionId+")")}),this.channel.presence.subscribe("leave",function(t){console.log("Aho"),console.log("Member "+t.clientId+" left ("+t.connectionId+")");var a=e.playerData.findIndex(function(e){return e.name==t.clientId});t.connectionId===e.playerData[a]["connectionID"]&&(e.playerData[a]["inmarket"]="No")});var t=this.channel_prefix+"/registration",a=this.channel_prefix+"/bid",r=this.channel_prefix+"/heartbeat";this.channel.on("attached",function(){console.log("Channel attached"),e.channel.subscribe(t,function(t){e.onPlayerRegistration(t)}),e.channel.subscribe(a,function(t){e.onPlayerBid(t)}),e.channel.subscribe(r,function(e){alert(e.data)})}),this.channel.attach()},startServer:function(){console.log(this.channel_prefix),this.initialize(),this.serverStarted=!0},onPlayerRegistration:function(e){var t=this;this.registration_buffer.push(e),this.currentCount+=1;var a=function(){var e=t.registration_buffer[0],a=e.connectionId,r=JSON.parse(e.data);if(console.log("new registration message from "+r["name"]),console.log(r),r["marketID"]==t.channel_prefix&&""!=r["name"])if(console.log(t.playerData.some(function(e){return e["name"]===r["name"]})),"connect"!=r["action"]||t.playerData.some(function(e){return e["name"]===r["name"]})){if("disconnect"==r["action"]&&t.playerData.some(function(e){return e["name"]===r["name"]&&e["uniqueID"]===r["uniqueID"]})){delete t.onlinePlayers[r["name"]];var i=t.playerData.findIndex(function(e){return e.name==r["name"]});t.playerData.splice(i,1)}else if("connect"==r["action"]&&"No"===t.playerData[t.playerData.findIndex(function(e){return e.name===r["name"]})].inmarket){console.log("Member "+r["name"]+" is back");var s=t.playerData.findIndex(function(e){return e.name==r["name"]});t.playerData[s]["inmarket"]="Yes",t.playerData[s]["connectionID"]=a;var o={},n=[];y()(t.periodResult).map(function(e){o[e]=t.periodResult[e][r["name"]],n.push(t.periodResult[e]["clear_price"])}),t.last_message["offers"]=t.onlinePlayers[r["name"]],t.last_message["laps"]=n,t.last_message["profits"]=o;var l={status:"201",payload:t.last_message};t.channel.publish(r["uniqueID"],D()(l))}}else if(!t.marketStarted){t.onlinePlayers[r["name"]]={},t.playerData.push({name:r["name"],inmarket:"Yes",total_profit:0,offers:"No",uniqueID:r["uniqueID"],connectionID:a});var c={status:"200"};t.channel.publish(r["uniqueID"],D()(c))}console.log(t.onlinePlayers),console.log(t.scenarioSetup),t.registration_buffer.shift()};while(this.registration_buffer.length>0)a()},onPlayerBid:function(e){var t=this;this.offer_buffer.push(e),this.currentCount+=1;var a=function(){var e=t.offer_buffer[0],a=JSON.parse(e.data);if(console.log("new bid from "+a["name"]),a["marketID"]==t.channel_prefix){t.onlinePlayers[a["name"]][t.lastPeriodNumber.toString()]=a["bid"];var r=t.playerData.findIndex(function(e){return e.name==a["name"]});t.playerData[r]["offers"]="Yes"}console.log(t.onlinePlayers),t.offer_buffer.shift()};while(this.offer_buffer.length>0)a()},changeType:function(e){this.typeSelected=e},calculateResult:function(){var e,t,a,r,i,s,o,n,l,c={},u=[],d=[],h=0,f=0,p=[50,20,10,10,10],m=[20,30,40,50,65];for(var b in console.log(this.onlinePlayers),console.log(y()(this.onlinePlayers)),this.onlinePlayers)for(var v in console.log(b),c[b]={generation:0,profit:0,generationDetail:{}},r=this.onlinePlayers[b][this.lastPeriodNumber.toString()],r)u.push([b,v,r[v],p[v],m[v]]);for(var g in console.log(u),u.sort(function(e,t){return e[2]-t[2]}),console.log(u),console.log(this.fairLoadList[this.lastPeriodNumber]),i=this.fairLoadList[this.lastPeriodNumber],u){if(h+=u[g][3],!(h<i)){s=u[g],s[3]-=h-i,d.push(s),o=Number(s[2]);break}d.push(u[g])}if(console.log(o),this.lap=o,this.lastPeriodPrice=o,console.log(d),"lao"==this.typeSelected){for(var P in console.log("lao"),d)n=d[P][0],l=d[P][3]*(o-d[P][4]),c[n].profit+=l,f+=l,c[n].generation+=d[P][3],c[n].generationDetail[d[P][1]]=d[P][3];console.log(c)}else if("pao"==this.typeSelected)for(var k in d)n=d[k][0],l=d[k][3]*(Number(d[k][2])-d[k][4]),c[n].profit+=l,f+=l,c[n].generation+=d[k][3],c[n].generationDetail[d[k][1]]=d[k][3];for(var j in this.periodProfit=f,this.periodResult[this.lastPeriodNumber]={},this.periodResult[this.lastPeriodNumber]["clear_price"]=this.lap,y()(this.onlinePlayers)){n=y()(this.onlinePlayers)[j],e=c[n].generation,t=c[n].profit,console.log(n),console.log(e),console.log(t),console.log(this.playerData);var D=this.playerData.findIndex(function(e){return e["name"]==n});console.log(D),this.playerData[D]["total_profit"]+=t,this.playerData[D]["offers"]="No",console.log(this.periodResult),console.log("Here"),console.log(y()(this.onlinePlayers)[j]),a=y()(this.onlinePlayers)[j],console.log(a),console.log(j),this.periodResult[this.lastPeriodNumber][a]={generation:e,profit:t,totalProfit:this.playerData[D]["total_profit"],generationDetail:c[n].generationDetail},this.plotlyData[j].x.push(this.lastPeriodNumber),this.plotlyData[j].y.push(t)}this.chartBottom=20,console.log(this.plotlyData),console.log(this.periodResult),console.log(this.playerData)},startPeriod:function(){if(console.log(this.scenarioSetup),this.marketStarted)this.calculateResult(),this.periodData.push({number:this.lastPeriodNumber,load:this.fairLoadList[this.lastPeriodNumber],price:this.lap,profit:this.periodProfit});else{for(var e in this.marketStarted=!0,this.periodResult[this.lastPeriodNumber]={},y()(this.onlinePlayers))this.periodResult[this.lastPeriodNumber][y()(this.onlinePlayers)[e]]={generation:0,profit:0,totalProfit:0},this.plotlyData.push({x:[],y:[],mode:"lines+markers",name:y()(this.onlinePlayers)[e],line:{shape:"spline"},type:"scatter"});console.log(this.periodResult)}var t={scenarioType:this.typeSelected,scenarioSetup:this.scenarioSetup,lastPeriod:this.lastPeriod.map(function(e){return e.value}),currentPeriod:this.currentPeriod.map(function(e){return e.value}),lastPeriodResult:this.periodResult[this.lastPeriodNumber]},a=this.channel_prefix+"/result";console.log(t);var r=D()(t);this.last_message=JSON.parse(D()(t)),this.channel.publish(a,r,function(e){e?console.log("Unable to publish message; err = "+e.message):console.log("Message successfully sent")}),console.log("Period result is sent to the clients"),this.lastPeriodNumber==this.totalPeriod?(console.log("Market is closed"),this.marketClosed=!0,this.$message.success("Market is closed")):this.increasePeriodNumber()},increasePeriodNumber:function(){this.lastPeriodNumber+=1,this.currentPeriodNumber+=1},onAuto:function(e){this.automatic=e.target.checked},loadTextFromFile:function(e){var t=this,a=e.target.files[0],r=new FileReader;r.onload=function(e){var a=JSON.parse("["+e.target.result+"]");a.every(function(e){return"number"===typeof e})?(t.periodLoadList=a,t.periodLoadList.unshift(0),t.$message.success("Load profile updated")):t.$message.error("Unsupported format")},r.readAsText(a)},save:function(){console.log("Saving data");var e={PeriodResult:this.periodResult,PlayerData:this.onlinePlayers};function t(e,t,a){var r=document.createElement("a"),i=new Blob([e],{type:a});r.href=URL.createObjectURL(i),r.download=t,r.click()}console.log(e),t(D()(e),"data.json","text/plain")},reset:function(){this.marketClosed=!1,this.marketStarted=!1,this.lastPeriodNumber=0,this.currentPeriodNumber=1,this.periodData=[],this.playerData.map(function(e){return e.total_profit=0,e.offers="No",e}),this.plotlyData=[]},onDelete:function(e){console.log(e),console.log(this.playerData);var t=Object(m["a"])(this.playerData);this.playerData=t.filter(function(t){return t.name!==e})},onHurry:function(e){var t={status:"202",payload:"Please submit your offers now!"};this.channel.publish(e,D()(t))},copyID:function(){var e=this;this.$copyText(this.channel_prefix).then(function(){e.$message.info("Market ID copied")})},onTrafficMonitor:function(){var e=this;Object(W["setInterval"])(function(){e.traffic_data.push(e.currentCount-e.lastCount),e.lastCount=e.currentCount},2e3),Object(W["setInterval"])(function(){e.traffic_data=e.traffic_data.slice(e.traffic_data.length-11,e.traffic_data.length)},6e5)}},mounted:function(){this.onTrafficMonitor()},watch:{playerData:{handler:function(e){var t=this;console.log("Triggered"),this.automatic&&!this.marketClosed&&(0==this.lastPeriodNumber?e.length==this.allowedPlayerNumber&&Object(W["setTimeout"])(function(){t.startPeriod()},3e3):e.filter(function(e){return"Yes"==e.offers}).length==this.allowedPlayerNumber&&Object(W["setTimeout"])(function(){t.startPeriod()},3e3))},deep:!0}},computed:{series:function(){return[{data:this.traffic_data.slice()}]},plotlyLayout:function(){return{height:50*Math.max(this.playerData.length,1)+100,margin:{l:10,r:0,t:0,b:this.chartBottom},xaxis:{visible:!0,fixedrange:!0,rangemode:"nonnegative",zeroline:!1},yaxis:{visible:!0,fixedrange:!0,zeroline:!0,autotick:!0}}},fairLoadList:function(){var e=this;return this.periodLoadList.map(function(t){return Math.round(t/6*e.allowedPlayerNumber)})},scenarioSetup:function(){return[{title:"Number of Players",value:this.allowedPlayerNumber},{title:"Number of Periods",value:this.totalPeriod},{title:"Number Connected",value:this.playerData.length}]},lastPeriod:function(){return[{title:"Period Number",value:this.lastPeriodNumber},{title:"Period Load (MW)",value:this.fairLoadList[this.lastPeriodNumber]},{title:"Last Period Price ($/MWh)",value:this.lastPeriodPrice}]},currentPeriod:function(){return[{title:"Period Number",value:this.currentPeriodNumber},{title:"Period Load (MW)",value:this.fairLoadList[this.currentPeriodNumber]},{title:"Players with Offers",value:this.playerData.filter(function(e){return"Yes"===e.offers}).length}]},periodBtnLabel:function(){var e;return e=0==this.lastPeriodNumber?"Start Market (Period = 0)":this.lastPeriodNumber!=this.totalPeriod?"Start Period (Allow Offers)":"Finish Period & Close Market",e},notEnoughPlayer:function(){return this.playerData.length!=this.allowedPlayerNumber},formItemLayout:function(){var e=this.formLayout;return"horizontal"===e?{labelCol:{span:8},wrapperCol:{span:4}}:{}},buttonItemLayout:function(){var e=this.formLayout;return"horizontal"===e?{wrapperCol:{span:4,offset:8}}:{}},channel_prefix:function(){return this.id_prefix+this.marketID}},components:{apexchart:window.VueApexCharts,VuePlotly:F.a}},G=E,V=(a("5bba"),Object(u["a"])(G,T,Y,!1,null,"2405fa68",null)),q=V.exports,U={name:"app",data:function(){return{currentPage:"Client",marketDisable:!1}},components:{HelloWorld:h,client:B,market:q},methods:{lock:function(e){console.log("Market tab status switched. \n"),this.marketDisable=e}},created:function(){},computed:{page:function(){return this.currentPage.toLowerCase()}}},K=U,J=(a("034f"),Object(u["a"])(K,i,s,!1,null,null,null)),X=J.exports,$=a("f23d"),Q=(a("202f"),a("ce5b")),Z=a.n(Q),ee=(a("2068"),a("4eb5")),te=a.n(ee);r["default"].use(Z.a,{iconfont:"md"}),r["default"].use($["a"]),r["default"].use(te.a),r["default"].config.productionTip=!1,new r["default"]({render:function(e){return e(X)},components:{App:X},template:"<App/>"}).$mount("#app")},"5bba":function(e,t,a){"use strict";var r=a("9bb9"),i=a.n(r);i.a},"64a9":function(e,t,a){},"9bb9":function(e,t,a){},"9cce":function(e,t){e.exports="data:image/png;base64,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"},"9f0a":function(e,t,a){},abef:function(e,t,a){"use strict";var r=a("d5bb"),i=a.n(r);i.a},d5bb:function(e,t,a){}});
//# sourceMappingURL=app.efea58bf.js.map